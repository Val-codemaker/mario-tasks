@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Default Mario Theme */
  --theme-primary: #5C94FC;
  --theme-secondary: #E45C10;
  --theme-accent: #F8B800;
  --theme-panel: rgba(255, 255, 255, 0.85);
  --theme-text: #000000;
  --theme-border: #000000;
  --theme-bg-pattern: url('/mario_bg.png');
  --theme-text-outline: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
}

[data-theme='pacman'] {
  --theme-primary: #000000;
  --theme-secondary: #2121DE;
  --theme-accent: #FFFF00;
  --theme-panel: rgba(16, 16, 16, 0.8);
  --theme-text: #FFFFFF;
  --theme-border: #2121DE;
  --theme-bg-pattern: url('/pacman_bg.png');
  --theme-text-outline: none;
  background-size: 40px 40px;
}

[data-theme='sonic'] {
  --theme-primary: #0040C0;
  --theme-secondary: #F8D870;
  --theme-accent: #E45C10;
  --theme-panel: rgba(255, 255, 255, 0.85);
  --theme-text: #000000;
  --theme-border: #000000;
  --theme-bg-pattern: url('/sonic_bg.png');
  --theme-text-outline: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
  background-size: 60px 60px, 60px 60px, 60px 60px, 60px 60px, 100% 100%;
}

[data-theme='pokemon'] {
  --theme-primary: #ff5555;
  --theme-secondary: #FFCC00;
  --theme-accent: #3A5DA8;
  --theme-panel: rgba(240, 240, 240, 0.85);
  --theme-text: #000000;
  --theme-border: #3A5DA8;
  --theme-bg-pattern: url('/pokemon_bg.png');
  --theme-text-outline: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
  background-size: 50px 50px;
  background-position: 0 0, 25px 25px, 0 0;
}

[data-theme='zelda'] {
  --theme-primary: #006400;
  --theme-secondary: #A06020;
  --theme-accent: #F8D800;
  --theme-panel: rgba(250, 249, 246, 0.9);
  --theme-text: #204000;
  --theme-border: #204000;
  --theme-bg-pattern: url('/zelda_bg.png');
  --theme-text-outline: 1px 1px 0 #fff, -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff;
  background-size: 80px 140px;
}

@layer base {
  body {
    font-family: 'Press Start 2P', system-ui;
    background-attachment: fixed;
    text-shadow: var(--theme-text-outline);
    image-rendering: pixelated;
    @apply overflow-x-hidden text-[var(--theme-text)] min-h-screen font-pixel;
  }

  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    background-image: var(--theme-bg-pattern);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    transition: background-image 0.5s ease;
  }
}


@layer components {

  /* --- PROFESSIONAL RETRO PANELS --- */
  .pro-panel {
    @apply relative border-[4px] border-[var(--theme-border)] p-6 backdrop-blur-xl;
    background-color: var(--theme-panel);
    color: var(--theme-text);
    box-shadow:
      inset -6px -6px 0px 0px rgba(0, 0, 0, 0.1),
      inset 6px 6px 0px 0px rgba(255, 255, 255, 0.2),
      8px 8px 0px 0px rgba(0, 0, 0, 0.15);
  }

  /* --- MISSION ITEM --- */
  .mission-block {
    @apply relative p-6 border-[4px] border-[var(--theme-border)] transition-all cursor-pointer mb-4;
    background-color: var(--theme-accent);
    color: var(--theme-text);
    box-shadow:
      inset -4px -4px 0px 0px rgba(0, 0, 0, 0.2),
      inset 4px 4px 0px 0px rgba(255, 255, 255, 0.3),
      6px 6px 0px 0px rgba(0, 0, 0, 0.1);
  }

  .mission-block:hover {
    @apply -translate-y-1;
    filter: brightness(1.1);
  }

  .mission-block.completed {
    @apply opacity-50 grayscale;
  }

  /* --- PRO BUTTONS --- */
  .pro-button {
    @apply relative px-6 py-3 uppercase text-[10px] tracking-widest transition-all cursor-pointer;
    background-color: var(--theme-secondary);
    color: var(--theme-text);
    border: 4px solid var(--theme-border);
    box-shadow:
      inset -4px -4px 0px 0px rgba(0, 0, 0, 0.2),
      inset 4px 4px 0px 0px rgba(255, 255, 255, 0.3),
      0px 6px 0px 0px var(--theme-border);
  }

  .pro-button:active {
    @apply translate-y-1;
    box-shadow:
      inset -4px -4px 0px 0px rgba(0, 0, 0, 0.2),
      inset 4px 4px 0px 0px rgba(255, 255, 255, 0.3),
      0px 2px 0px 0px var(--theme-border);
  }

  .pro-button-secondary {
    @apply pro-button;
    background-color: var(--theme-primary);
  }

  /* --- SAGA SELECTION PIPES / BLOCKS --- */
  .saga-item {
    @apply relative cursor-pointer transition-all flex flex-col items-center p-2 border-4 border-transparent;
    background-color: rgba(255, 255, 255, 0.05);
  }

  .saga-item:hover {
    border-color: var(--theme-accent);
  }

  .saga-active {
    border-color: var(--theme-accent);
    background-color: rgba(255, 255, 255, 0.1);
    filter: drop-shadow(0 0 10px var(--theme-accent));
  }



  /* --- UTILITIES --- */
  .pixel-text-shadow {
    text-shadow: 3px 3px 0px #000;
  }

  .pixelated {
    image-rendering: pixelated;
  }
}

/* --- ANIMATIONS --- */
@keyframes coin-bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-15px);
  }
}

.animate-coin {
  animation: coin-bounce 0.8s ease-in-out infinite;
}

@keyframes cloud-float {
  from {
    transform: translateX(110vw);
  }

  to {
    transform: translateX(-20vw);
  }
}

.cloud {
  animation: cloud-float 80s linear infinite;
}

.hit-shake {
  animation: shake 0.2s cubic-bezier(.36, .07, .19, .97) both;
}

@keyframes shake {

  10%,
  90% {
    transform: translate3d(-1px, 0, 0);
  }

  20%,
  80% {
    transform: translate3d(2px, 0, 0);
  }

  30%,
  50%,
  70% {
    transform: translate3d(-4px, 0, 0);
  }

  40%,
  60% {
    transform: translate3d(4px, 0, 0);
  }
}